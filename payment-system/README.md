# ticket sales service for regular buses

# Spring-boot with OpenAPI.

- [Welcome page localhost  :8080](http://127.0.0.1:8080/).
- [ticket-management-system  :8088](http://127.0.0.1:8088/).
- [payment-system  :8099](http://127.0.0.1:8099/).


## Система оплаты
Система оплаты имеет 2 сервиса
1) Сервис оплаты
2) Сервис получения статуса платежа
   
Сервис оплаты на вход принимает фио клиента + сумма, на выходе возвращает
   уникальный идентификатор платежа.

Сервис получения статусов на вход принимает уникальный идентификатор платежа,
   на выходе случайным образом отдает 1 из статусов NEW/FAILED/DONE


### Процесс покупки билета.

При заказе билета необходимо сохранить билет в базу, вычесть билет из количества
доступных билетов на рейсе и создать платеж в платежной системе.
Дополнительно необходимо реализовать обработчик по расписанию, который будет
проверять состояние всех билетов, у которых состояние платежа NEW.
Если получаем статус FAIL, возвращаем количество доступных билетов на рейсе и
больше не опрашиваем статус.
Если получаем DONE, то ничего не делаем и больше не опрашиваем статус.

Общение между системой оплаты и системой управления билетами осуществлять по
http протоколу.

Реализовывать на спринг бут.

Покрытие тестами приветствуется.